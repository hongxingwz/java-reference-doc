# 类型转换前先做检查

迄今为止，我们已知的RTTI形式包括：

* 传统的类型转换，如"\(Shape\)",由RTTI确保类型转换的正确性，如果执行了一个错误的类型转换，就会抛出一个**ClassCastException异常。**
* 代表对象的类型的**Class**对象。通过查询**Class**对象可以获取运行时所需的信息。
* 关键字**instanceof。**它返回一个布尔值，告诉我们对象是不是某个特定类型的实例。可以用提问的方法使用它，就像这样：

```java
if( x instanceof Dog)
    ((Dog)x).bark();
```

在将**x**转型成一个**Dog**前，上面的**If**语句会检查对象**x**是否从属于**Dog**类。进行向下转型前，如果没有其他信息可以告诉你这个对象是什么类型，那么使用**instanceof**是非常重要的，否则会得到一个**ClassCastException**异常。

一般，可能想要查找某种类型（比如要找三角型，并填充成紫色），这时可以轻松地使用**instanceof**来计数所有对象。例如，假设你有一个类的继承体系，描述了**Pet**\(以及它们的主人，这是在后抽的示例中出现的一个非常方便的特性）。在这个继承体系中每个的每个**Individual**都有一个**id**和一个可选的名字。尽管下面的类都继承自**Individual**，但是**Individual**类复杂性比较高，

